delay = (cb, i) ->
   i = i || 3
   setTimeout cb, i

test = (cb) ->
  class P
    constructor: ->
      @x = 10
  class A extends P
    constructor : ->
      super
    foo : (cb) ->
      await delay defer()
      cb()
  a = new A
  await a.foo defer()
  cb(a.x is 10, {})

await test defer r, x
console.log r
